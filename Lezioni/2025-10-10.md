# Lezione 06

### Pumping Lemma

Tutti i linguaggi sono regolari? La risposta è no.

Ad esempio:
$$L=\{0^{n}1^{n}:n\ge0\}$$
non è un linguaggio regolare, perché l'automa non è capace di contare lo stesso numero di zeri e di uni.

Per stabilire se un linguaggio è regolare viene utilizzato il **Pumping Lemma**. Questo teorema afferma che tutti i linguaggi regolari hanno una proprietà speciale, per cui uno che non c'è l'ha non sarà un linguaggio regolare.

La proprietà in questione afferma che tutte le stringhe nel linguaggio possono essere "pompate" se sono lunghe almeno quanto un certo specifico valore (**pumping length**). Questo significa che ognuna di queste stringhe contiene una sezione che può essere ripetuta un numero qualsiasi di volte senza che smetta di appartenere al linguaggio.
###### Teorema - Pumping Lemma
Se $L$ è regolare allora esiste un valore $p$ (**pumping length**) tale che presa una qualsiasi stringa $w\in L$ con $|w|\ge p,$ essa può essere scomposta in $w=xyz$ in modo che:
1. $\forall i \ge 0,\quad xy^{i}z\in L$
2. $|y|>0$
3. $|xy|\le p$

- $w$ deve essere una stringa in $M$ che deve avere lunghezza almeno pari a $p$
- $y^{i}$ significa che $i$ copie di $y$ sono concatenate. Se $i=0$ allora $y=\mathcal{E}.$
- La condizione 2 afferma che quando $w$ viene scomposto, $x$ o $z$ possono essere uguali a zero, ma non $y$.

**Idea + Dimostrazione Informale:**
- $p$ corrisponde alla cardinalità degli stati dell'automa $M$ tale che $L(M)=L.$ Siccome $|w|\ge p$ avremo una situazione del genere:

![[lez06_01.drawio.svg|700x181]]
Sia $M=(Q,\Sigma,\delta,q_{1},F)$ un DFA tale che $L(M)=L$ e sia la sua pumping length $p$ = $|Q|$ (la cardinalità degli stati).

Vogliamo far vedere che ogni stringa in $L$ può essere spezzata in tre parti $xyz$ che soddisfano le tre condizioni del pumping lemma.

Consideriamo una generica stringa $w$ di lunghezza $n$
$$w=w_{1}w_{2}...w_{n}$$
tale che $w \in L$ e $n\ge p.$

Se in $L$ non è presente alcuna stringa di lunghezza almeno $p$, il teorema è vero a vuoto perché la sua premessa è falsa.

Consideriamo ora la sequenza di stati che $M$ attraversa durante la computazione con input $w$. Essa sarà del tipo  $q_{1},q_{3},q_{20},q_{9},\ldots,q_{13}$ dove $q_{1}$ è lo stato iniziale e $q_{13}$ è uno stato accettante.

$$ w =\underset{\substack{\uparrow \\ q_{1}}}{}{w_{1}}\underset{\substack{\uparrow \\ q_{3}}}{}{w_{2}}

\underset{\substack{\uparrow \\ q_{20}}}{}{w_{3}}

\underset{\substack{\uparrow \\ (q_{9})}}{}{w_{4}}

\underset{\substack{\uparrow \\ q_{17}}}{}{w_{5}}

\underset{\substack{\uparrow \\ ({q_{9}})}}{}{w_{6}}\quad ...\underset{\substack{\uparrow \\ q_{35}}}{}{w_{n}}\underset{\substack{\uparrow \\ q_{13}}}{}$$

Essendo $w$ lunga $n$, il numero totale di stati attraversati è pari a $n+1$. Siccome $n\ge p$ allora $n+1 \gt p$. Di conseguenza, c'è almeno uno stato che si ripete. Nel nostro esempio è lo stato $q_{9}$ a ripetersi.

Questa osservazione è sempre vera grazie al **principio della piccionaia**.
###### Principio della Piccionaia
Se una piccionaia contiene $m$ casette e $m+1$ piccioni, in una casetta ci saranno due piccioni.

**Dimostrazione:**

![[lez06_piccioni.drawio.svg|700x470]]

Dividiamo adesso la stringa $w$ nelle tre parti $x$, $y$ e $z$ secondo i seguenti criteri:
- $x$ è la parte di $w$ che porta allo stato $q_{9}$ (quindi da $w_{1}$ a $w_{3}$)
- $y$ è la parte che si trova tra la due occorrenze di $q_{9}$ (quindi da $w_{4}$ a $w_{5}$)
- $z$ è la parte che porta dallo stato $q_{9}$ allo stato $q_{13}$ (quindi da $w_{6}$ a $w_{n}$)

![[immagine dfa.png]]

Vediamo quindi perché questa divisione di $w$ soddisfa le tre condizioni del pumping lemma.

1. $\forall i \ge 0,\quad xy^{i}z\in L$

Sappiamo che dopo aver letto $x$ l'automa si troverà in $q_{9}$ e che leggere $y$ riporta nuovamente l'automa nello stato $q_{9}$, pertanto rileggere la sottostringa $y$ un qualsiasi altro numero di volte riporterà sempre l'automa nello stato $q_{9}$. Infine, indipendentemente da quante volte si è letto $y$, $z$ porterà l'automa in $q_{13}$ con conseguente accettazione della stringa.

2. $|y|>0$

Questo si vede facilmente dal fatto che abbiamo definito $y$ come la sottostringa che si trova tra due diverse occorrenze di $q_{9}$.

3. $|xy|\le p$

Dal momento che $y$ termina alla seconda occorrenza di $q_{9}$ e che non ci sono stati che si ripetono prima di $q_{9}$, per il principio della piccionaia, è necessario che prima del secondo $q_{9}$ non siano presenti più di $p$ stati. Pertanto $q_{9}$ è al massimo il $(p+1)$-esimo e quindi posso aver letto al più $p$ caratteri per arrivarci.

**Dimostrazione Formale** 
Sia $M=(Q,\Sigma,\delta,q_{1},F)$ un DFA che riconosce $L$ e $p$ il numero di stati in $M$.

Sia $w=w_{1}w_{2}\ldots w_{n}$ una stringa in $L$ di lunghezza $n$, dove $n\ge p$. Sia $r_{1},...,r_{n+1}$ la sequenza di stati che $M$ attraversa processando $w$, quindi $r_{i+1}=\delta(r_{i},w_{i})$ per $1\le i \le n.$ Questa sequenza ha lunghezza $n+1$, che è almeno $p+1$. Tra i primi $p+1$ elementi nella sequenza, due devono essere lo stesso stato (per il teorema della piccionaia).

Chiamiamo il primo di questi stati $r_{j}$ e il secondo $r_{l}$. Dato che $r_{l}$ compare tra i primi $p+1$ stati in una sequenza che inizia ad $r_{1}$, abbiamo $l\le p+1.$ Siano quindi $$\begin{gathered} x=w_{1}...w_{j-1}\\ y= w_{j}...w_{l-1}\\ z=w_{l}...w_{n}.\end{gathered}$$
Siccome $x$ porta dallo stato $r_{1}$ allo stato $r_{j}$, $y$ porta $M$ dallo stato $r_{j}$ allo stato $r_{j}$ e $z$ dallo stato $r_{j}$ allo stato $r_{n+1},$ che è uno stato di accettazione, $M$ deve accettare $xy^{i}z$ per $i\ge 0$. Sappiamo che $j\neq l$, quindi $|y|>0;$ e $l\le p+1$, quindi $|xy|\le p$. Abbiamo così soddisfatto tutte le condizioni.
**Osservazioni**
Il pumping lemma è molto utile per dimostrare che un linguaggio $B$ non è regolare: per prima cosa si assume per assurdo che $B$ sia un linguaggio regolare e poi si dimostra che non rispetta il pumping lemma, portando ad una contraddizione. Per fare ciò si procede in genere nel seguente modo:

- Si assume che esista una "pumping length" $p$ per la quale tutte le stringhe in $B$ di almeno quella lunghezza possono essere "pompate".
- Si trova una stringa $s$ in $B$ lunga almeno $p$ che non può essere pompata.
- Si dimostra che, qualsiasi scomposizione $x$, $y$, $z$ si scelga, $s$ non può essere pompata senza violare una delle tre condizioni del pumping lemma.

Tuttavia, non è sempre facile trovare una stringa $s$ che faccia da controesempio, pertanto è consigliato provare con stringhe che catturino quanto più possibile "l'essenza" della non-regolarità di $B$.

Si noti infine che il pumping lemma funziona soltanto in una sola direzione, pertanto non è possibile usarlo per dimostrare che un linguaggio è regolare ma solo che non lo è.