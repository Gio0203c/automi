# Lezione 03
Nella lezione precedente abbiamo introdotto la classe dei **linguaggi regolari** (indicata con **$REG$**), definita come l'insieme di tutti i linguaggi per i quali esiste un Automa a Stati Finiti Deterministico in grado di riconoscerli.

I linguaggi regolari sono dotati di importanti proprietà: le proprietà di chiusura.
### Proprietà di Chiusura
###### Teorema - Chiusura rispetto all'unione
La classe dei linguaggi regolari $REG$ è chiusa rispetto all'operazione di unione.

**Idea:**
Intuizione: Siano $L_{1}$ e $L_{2}$ due linguaggi regolari, quindi: $$\begin{gathered}L_{1}, L_{2}\in\text{REG}\implies\exists M_{1},M_{2}, \\\text{ tali che } L(M_{1})=L_{1} \text{ e }L(M_{2})=L_{2}\end{gathered}$$
Bisogna quindi definire un nuovo automa $M$ tale che $L(M)=L_{1}\cup L_{2}.$

Data una stringa di input $x$ il nuovo automa deve accettarla se $M_{1}$ la accetta oppure se $M_{2}$ la accetta.

L'idea di eseguire prima $M_{1}$ e poi $M_{2}$ sulla stessa stringa non è implementabile con un DFA. Il motivo fondamentale è che un DFA processa l'input in una singola passata, da sinistra a destra. 

Una volta letta l'intera stringa per essere testata su $M_{1}$ l'input è stato "consumato". L'automa non ha la capacità di "riavvolgere" l'input e ricominciare la lettura per $M_{2}$.

La soluzione quindi è di simulare $M_{1}$ e $M_{2}$ *in parallelo* e accettare se uno dei due accetta.
**Dimostrazione:**
Siano $$M_{1}=(Q_{1}, \Sigma, \delta_{1},q_{0}^{1},F_{1})$$e $$M_{2}=(Q_{2}, \Sigma, \delta_{2},q_{0}^{2},F_{2})$$
tale che $L(M_{1})=L_{1}$ e $L(M_{2})=L_{2}$.
Bisogna costruire $M=(Q,\Sigma,\delta,q_{0},F)$ tale che $L(M)=L_{1}\cup L_{2}$. 
Avremo:
- 
$$Q=\{(r_{1},r_{2}):r_{1}\in Q_{1}, r_{2}\in Q_{2} \} =Q_{1}\times Q_{2}$$
- 
$$\begin{gathered}\delta:Q \times \Sigma \longrightarrow Q \\ \delta((r_{1},r_{2}),a) = (\delta_{1}(r_{1},a),\delta_{2}(r_{2},a)) \end{gathered}$$
- 
$$\begin{gathered}F=\{(r_{1},r_{2}):r_{1},\in F_{1}\lor r_{2}\in F_{2} \} \end{gathered}$$

Se fosse stato $L=L_{1}\cap L_{2}$ avrei dovuto usare $F_{1}\times F_{2}$

Correttezza: usare l'induzione per dimostrare la seguente proprietà

$$\begin{gathered}\delta^{*}(q_{0},x)=\delta^{*}\Big((q_{0}^{1},q_{0}^{2}),x\Big) \\ = \Big(\delta^{*}_{1}(q_{0}^{1},x),\delta^{*}_{2}(q_{0}^{2},x)\Big)\end{gathered}\quad\forall x\in\Sigma^{*}$$
Esercizio: Provatelo per induzione.

La correttezza segue immediatamente
 $$\forall x\in \Sigma^{*}\qquad x\in L(M) \iff x\in L_{1}\cup L_{2}$$
 **Dimostrazione:**
 $\implies:$
 Se $x\in L(M)$, allora $\delta^{*}(q_{0},x)\in F = (F_{1}\times Q_{2})\cup (F_{2}\times Q_{1}) = (p,q)$
$p = \delta^{*}_{1}(q_{0}^{1},x)$ e $q=\delta^{*}_{2}(q_{0}^{2},x)$ (con $p=\delta^{*}_{1}(q_{0}^{1},x)$ e $q=\delta^{*}_{2}(q_{0}^{2},x)$)
$\implies p\in F_{1}$ oppure $q\in F_{2}$
$\implies x\in L_{1}$ oppure $x\in L_{2}\implies x\in L_{1}\cup L_{2.}$

$\Longleftarrow:$
Se $x\in L_{1}$, $\delta^{*}(q_{0}^{1},x)\in F_{1}$
$\delta^{*}(q_{0},x)=(\delta^{*}_{1}(q_{0}^{1},x),\delta^{*}(q_{0}^{2},x))\in F_{1}\times Q_{2}\subseteq F \implies M$ accetta $x$.
Stessa cosa se $x\in L_{2}.$

Esercizio: Dimostrare che $REG$ è chiusa per COMPLEMENTO.

Vogliamo ora trattare la concatenazione. dati $L_{1}, L_{2}\in REG$ vorremmo dimostrare che $L_{1}\circ L_{2}\in REG.$

Dato $x$, devo "capire" come spezzare $x$ in $x_{1}\circ x_{2}=x_{1}x_{2}$ tali che $x_{1}\in L_{1}$ e $x_{2}\in L_{2}.$ Sembra complicato. Per risolvere questo problema introdurremo il **non-determinismo**.

### Non Determinismo
È un po' una "magia:" finora la computazione è deterministica. Ovvero se $D\in DFA$ e $D$ legge $a\in\Sigma$ nello stato $q\in Q$, allora $D$ può andare in un unico altro stato $p\in Q.$

Nel caso non deterministico:
- Quando l'automa è in $q$ e legge $a$ può andare in diversi stati: $p_{1},p_{2},...$
- Inoltre sono ammessi $\mathcal{E}-\text{archi}:$ consentono di aprire rami di computazione parallela senza leggere nulla.
- Accettare: Accetto se e solo se esiste almeno un ramo che accetta.

<span style="background:#d3f8b6">IMMAGINE DEL DFA VS NFA</span>

###### Definizione - NFA
Un NFA è $(Q,\Sigma,\delta,q_{0},F)$ dove $q,\Sigma,q_{0},F$ sono come un DFA, mentre invece:
$$\begin{gathered}\delta:Q\times\Sigma_{\mathcal{E}}\longrightarrow\mathcal{P}\end{gathered}(Q)$$
$$\begin{gathered}\Sigma_{\mathcal{E}}=\Sigma\cup \{\mathcal{E} \} \end{gathered}$$
Dove $\mathcal{P}(Q)$ è l'insieme di tutti i possibili sottoinsiemi di $Q$.

Esempi:
<span style="background:#d3f8b6">IMMAGINE DELL'AUTOMA D'ESEMPIO</span>
$L=\Big\{x\in\{0,1 \}^{*}:$ $x$ ha "$1$" in terzultima posizione$\Big\}$
$x=100$ si
$x=1000$ no
$x=10110\in L$ 
(Per casa: $10010.$)

<span style="background:#d3f8b6">IMMAGINE DELL'ALBERO</span>

Esercizio:
<span style="background:#d3f8b6">IMMAGINE DELL'AUTOMA</span>

Possiamo estendere il concetto di configurazione: Per $NFA$ $N$ sarà una coppia $(q,x)\in Q\times\Sigma^{*}_{\mathcal{E}}.$ Avremo:
$$(p,ax)\vdash_{N}(q,x)\iff q\in\delta(p,a)\qquad\begin{cases}x\in\Sigma^{*}_{\mathcal{E}}\\ a\in\Sigma_{\mathcal{E}}\\ p,q\in Q \end{cases}$$
$$\begin{gathered}\delta(p,a)\in\mathcal{P}(Q) \end{gathered}$$
Quando è che $N$ accetta $w\in\Sigma^{*}_{\mathcal{E}}?$ Se e solo se $\exists q\in F$ tale che $$(q_{0},w)\vdash_{N}^{*}(q,\mathcal{E})$$ dove $\vdash_{N}^{*}$ è la relazione estesa.

Adesso voglio confrontare due classi:
$$\mathcal{L}(DFA)\equiv REG$$
$$\mathcal{L}(NFA)=\{L:\exists NFA\quad N \ \text{tale che }L(N)=L\}$$

###### Teorema $REG = \mathcal{L}(NFA).$

**Dimostrazione:**
Devo mostrare $\mathcal{L}(NFA)\subseteq \mathcal{L}(DFA)$ e $\mathcal{L}(DFA)\subseteq\mathcal{L}(NFA).$

Ovvio: Se $L\in \mathcal{L}(DFA)\exists DFA\  N\exists DFA\ D$ tale che $L(D)=L$, ma allora $N=D$ è $NFA$ tale che $L(N)=L.$

L'altra direzione: Se $L\in \mathcal{L}(NFA)\exists NFA\ N=(Q_{N},\Sigma,\delta_{N},q_{0}^{N},F_{N})$ tale che $L(N)=L.$

Devo costruire $DFA$ $D$ $(Q_{D},\Sigma,\delta_{0},q_{0}^{D},F_{D})$ tale che $L(D)=L$.
(Stessa idea della prova di chiusura per unione.)

Caso semplice: $\nexists$ $\mathcal{E}-\text{archi}$. Allora avremo:
- $Q_{D}=\mathcal P(Q_{N})$
- $q_{0}^{D}=\{q_{0}^{N} \}$
- $F_{D}=\{R\in Q_{D}:R\cap F_{N}\neq\emptyset \}$. $R$ contiene uno stato finale di $Q_{N}$.
- Sia $R\in Q_{D},\ a\in\Sigma:$
$$\delta_{D}(R,a)=\bigcup_{x\in R}\delta_{N}(r,a)$$
$$\Big(=\{q,\in Q_{N}: q\in\delta_{N}(r,a) \text{ per qualche } r\in R\}.\Big)$$
Di fatto $D$ sta emulando deterministicamente tutti i rami di computazione non-deterministici di $N.$

Caso generale: Ci sono $\mathcal{E}-\text{archi}$. Devo tenere traccia degli sati raggiungibili usando $\mathcal{E}-\text{archi}$.

Sia $R\in Q_{D}$. Definisco:
$E(R)=\{q\in Q_{N}: q$ può essere rggiunto da stati in $R$ attraverso $\ge0$ $\mathcal{E}-\text{archi}\}$. A questo punto: $$\delta_{D}(R,a)=\bigcup_{r\in R}E(\delta_{N}(r,a))$$
Correttezza: come sopra.
Esempio: Dato il seguente $NFA$
<span style="background:#d3f8b6">IMMAGINE NFA</span>

Definire il $DFA$ $D$ tale che $L(D)=L(N)$.
