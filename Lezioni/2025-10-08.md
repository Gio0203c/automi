# Lezione 05
Nella scorsa lezione è stato introdotto il teorema che mette in relazione espressioni regolari e automi: essi descrivono esattamente la stessa classe di linguaggi.
###### Teorema - Linguaggi ed Espressioni Regolari
Un linguaggio è regolare se e solo se esiste una espressione regolare che lo descrive. In particolare $$REG\equiv L(re).$$
In altre parole, classe dei linguaggi regolari e quella dei linguaggi definiti da espressioni regolari sono equivalenti.
**Dimostrazione:**
- **$L(re)\subseteq REG:$** Ogni linguaggio definibile tramite un'espressione regolare è un linguaggio regolare

Data un'espressione regolare $r$, bisogna trovare il modo di costruire un NFA/DFA $N_{r}$ che riconosca il linguaggio da essa descritto, ovvero $L(N_{r})=L(r)$.

Per farlo, ci aiuta la definizione ricorsiva che abbiamo delle espressioni regolari:
**Caso base**:
- $r=a,a\in\Sigma$:
![[lez05_01.drawio.svg|700x348]]
$$\begin{aligned}N_{r}=(\{q_{1},q_{2}\},\Sigma,\delta,q_{1},\{q_{2} \})\\ \delta(q_{1},a) =q_{2} \\ \delta(q,b)=\emptyset,\quad\text{se } q\neq q_{1}\lor b\neq a \end{aligned}$$
- $r=\mathcal{E}$:
![[lez05_02.drawio.svg|700x190]]
$$\begin{aligned}N_{r}=(\{q_{1}\},\Sigma,\delta,q_{1},\{q_{1} \})\\\delta(q_{1},b)=\emptyset,\quad\forall b\in\Sigma \end{aligned}$$
- $r=\emptyset$
![[lez05_03.drawio.svg|700x159]]
$$\begin{aligned}N_{r}=(\{q_{1}\},\Sigma,\delta,q_{1},\emptyset)\\ \delta(q_{1},b)=\emptyset,\quad \forall  b\in\Sigma \end{aligned}$$
**Caso Induttivo:**
- $r=R_{1}\cup R_{2}$
Se
$$\begin{gathered}\exists M_{1},M_{2}\text{ tali che }L(M_{1})=L(R_{1})\text{ e }L(M_{2})=L(R_{2})\end{gathered}$$
allora:
$$\begin{gathered}\exists M\text{ tale che }L(M)=L(R_{1})\cup L(R_{2}) \end{gathered}$$
Per ipotesi induttiva, assumiamo che i due linguaggi $L(R_{1})$ e $L(R_{2})$ definiti dalle espressioni regolari $R_{1}$ e $R_{2}$ siano linguaggi regolari (ovvero esistono due DFA che li riconoscono). Bisogna dimostrare che anche la loro unione è un linguaggio regolare (questo è vero per chiusura di $REG$).
- $r=R_{1}\circ R_{2}$
La dimostrazione è analoga al caso dell'unione
- $r=(R_{1})^{*}$
La dimostrazione è analoga ai primi due casi.

Questo è un modo per definire un NFA a partire dall'espressione regolare. 

Esercizio: $(ab\cup a)^{*}$. Qual è il suo NFA corrispondente?
![[lez05_04.drawio.svg|700x1344]]

- $REG\subseteq L(re)$ Se un linguaggio è regolare allora una espressione regolare lo descrive.

Partendo da un NFA $N$,  tale che  $\exists L\in REG:L(N)=l'obiettivo è quello di riuscire a convertirlo in un'espressione regolare.

Per facilitare la conversione in espressione regolare introduciamo il **NFA Generalizzato (GNFA)**.

Il procedimento della dimostrazione consiste in:
1. Convertire il DFA in un GNFA
2. Convertire un GNFA in **forma canonica** (o **forma normale**), un suo caso semplice.
3. Convertire un GNFA in forma canonica in un'espressione regolare.

Un GNFA è un NFA dove:
- le etichette degli archi sono espressioni regolari anziché simboli.
- gli input possono essere letti come blocchi di caratteri invece che necessariamente leggere un carattere alla volta.

Un GNFA **accetta** una parola $w$ se è contenuta nel linguaggio denotato dall'espressione regolare che etichetta un cammino dallo stato iniziale a uno finale.
![[lez05_05.drawio.svg|700x269]]
In questo esempio, il linguaggio accettato è l'insieme delle parole formate da zero o più $a$ e che terminano per $ba$, oppure da quelle che iniziano con $bba$.

Un GNFA è in forma canonica se:
1. Ha esattamente uno stato finale diverso da quello iniziale, e lo stato finale non ha archi entranti.
2. Lo stato finale non ha archi uscenti.
3. Eccetto lo stato finale $p,$

Inoltre assumiamo senza perdita di generalità che il GNFA sia in forma canonica:
- Lo stato iniziale: ha solo archi uscenti.
- Lo stato finale: ha solo archi entranti.
-  Eccetto lo stato finale e lo stato iniziale c'è un arco per ogni coppia di stati.
In pratica: $$(G=Q,\Sigma,\delta,q_{start},q_{acc})$$
$$\delta:Q\setminus \{q_{acc} \}\times Q\setminus \{q_{start} \}\longrightarrow\underset{\substack{\text{Insieme delle} \\ \text{espressioni regolari} \\ \text{su }\Sigma}}{\underbrace{\mathcal{R}=re(\Sigma)}}$$

$Q\equiv$ insieme espressione

Perché la forma canonica è senza perdita di generalità?

Posso sembre aggiungere: $q_{start},q_{acc}$ e gli archi mancanti tra ogni coppia di stati.

<span style="background:#affad1">DISEGNO</span>

Siamo pronti per convertire $G$ in espressione regolare.
 $Convert(G):$
 - Sia $k=\#$ stati in $G$
 - Se $k=r,G$ avrà solo 2 stati: $q_{start},q_{acc}$ e un solo arco con etichetta $R\in\mathcal{R}$ con output $R.$
 - Se $k>r,$ scelgo $q_{rip}\in Q,\quad q_{rip}\in q_{start},q_{acc}$ e definisco $G'=(Q',\mathcal{E},\delta',q_{start},q_{acc})$ dove $Q'=Q\setminus\{q_{rip} \}$

La $$\delta':Q'\setminus\{q_{acc} \}\times Q'\setminus \{q_{start} \}\longrightarrow \mathcal{R}$$
$$\forall q_{i}\in Q'\setminus \{q_{acc} \}, q_{j}\in Q'\setminus\{q_{start} \}$$
$$\delta'(q_{i},q_{i})=(R_{1})(R_{2})^{*}(R_{3})\cup R_{4}$$
<span style="background:#affad1">DISEGNO DI $q_{i},q_{j} e q_{rip}$</span>

$$\begin{gathered}R_{1}=\delta(q_{i},q_{rip}) \\ R_{2} = \delta(q_{rip},q_{rip})\\ R_{3}=\delta(q_{rip},q_{j})\\ R_{4}=\delta(q_{i},q_{j}) \end{gathered}$$
Lancio $Convert(G):$
Per concludere:
Devo dimostrare che $Convert(G)$ è equivalente a $G.$ Per $k=2$ è sicuramente vero (banale).

L'espressione regolare $R$ descrive tutte le stringhe che portano $G$ da $q_{start}$ a $q_{acc}$

Suppongo vero per $k-1$ stati e faccio vedere che è vero per $k$ stati. Basta mostrare che $L(G)=L(G').$ Così la prova segue dall'ipotesi induttiva siccome $\#$ stati di $G'$ è $k-1$. Ma se $G$ accetta $w$, allora $\exists$ un ramo di computazione tale che $G$ percorre gli stati $q_{start},q_{1},...,q_{acc}$.

Se la sequenza non contiene $q_{rip},$ allora banalmente $L(G)=L(G')$ perché le nuove espressioni regolari contengono le vecchie come unione. Se c'è $q_{rip}$ avrò ad esempio $q_{1}q_{rip}q_{2}$

e quindi una nuova sequenza di stati per $G'.$ Ma gli stati adiacenti a $q_{rip}$ ($q_{1} e q_{2}$) in $G'$ hanno un arco che tiene conto di tutti i modi per andare da $q_{1}$ a $q_{2}$ direttamente o passando per $q_{rip}.$

Quindi ancora $L(G)=L(G').\quad\blacksquare$

Esercizio: trovare l'espressione regolare associata a
<span style="background:#affad1">DISEGNO DELL'NFA</span>
<span style="background:#b1ffff">Svolgiamolo!</span>
<span style="background:#affad1">DISEGNO DELLO SVOLGIMENTO</span>
### Pumping Lemma
Tutti i linguaggi sono regolari? La risposta è no.

Ad esempio:
$$L=\{0^{n}1^{n}:n\ge0\}$$
non è un linguaggio regolare, perché l'automa non è capace di contare lo stesso numero di zeri e di uni.

Nella prossima lezione vedremo che il pumping lemma è un modo per dimostrare che un linguaggio non è regolare.